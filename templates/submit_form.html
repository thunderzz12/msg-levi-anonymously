<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Send Message Anonymously</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* ----------------------------------------------------------------- */
        /* DEFAULT DARK MODE STYLES */
        /* ----------------------------------------------------------------- */
        body { 
            background-color: #1a1a2e; /* Deep Indigo/Black */
            color: #ffffff; 
            transition: background-color 0.5s, color 0.5s; /* Smooth transitions */
        } 
        .card { 
            border-radius: 15px; 
            background-color: #2e2e4e; /* Darker Card */
            border: 1px solid #4a4a7e; 
            transition: background-color 0.5s, border-color 0.5s;
        }
        .form-control {
            background-color: #3e3e6e;
            color: #ffffff;
            border: 1px solid #4a4a7e;
            transition: background-color 0.5s, color 0.5s;
        }
        .form-control:focus {
            background-color: #3e3e6e;
            color: #ffffff;
            border-color: #00bcd4; /* Accent color */
            box-shadow: 0 0 0 0.25rem rgba(0, 188, 212, 0.25);
        }
        .btn-primary {
            background-color: #00bcd4;
            border-color: #00bcd4;
        }

        /* ----------------------------------------------------------------- */
        /* VISIBILITY FIXES: PLACEHOLDER & TAGLINE COLOR */
        /* ----------------------------------------------------------------- */
        .form-control::placeholder { 
            color: #00bcd4 !important; /* Light Blue Accent */
            opacity: 0.7;
        }
        
        #rotating-tagline {
            height: 25px; 
            transition: opacity 0.5s ease-in-out;
            color: #00bcd4 !important; /* LIGHT BLUE ACCENT for visibility */
        }

        /* ----------------------------------------------------------------- */
        /* LIGHT MODE STYLES (Switched by JavaScript) */
        /* ----------------------------------------------------------------- */
        body.light-mode {
            background-color: #f8f9fa; /* Light Gray/White */
            color: #212529;
        }
        .card.light-mode {
            background-color: #ffffff;
            border: 1px solid #ced4da;
        }
        .form-control.light-mode {
            background-color: #ffffff;
            color: #212529;
            border: 1px solid #ced4da;
        }
        .form-control.light-mode::placeholder {
            color: #007bff; /* Standard Blue in light mode */
            opacity: 0.7;
        }

        /* Theme Switcher Button Styling */
        #theme-toggle {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.15); 
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            z-index: 100;
            transition: background-color 0.3s, color 0.3s;
        }
        #theme-toggle.light-mode {
            background: rgba(0, 0, 0, 0.15);
            color: black;
        }
    </style>
</head>
<body>

    <button id="theme-toggle" onclick="toggleTheme()">â˜€ï¸ Light Mode</button>

    <div class="container my-5">
        <div class="row justify-content-center">
            <div class="col-md-7 col-lg-5">
                <div class="card shadow-lg border-0">
                    <div class="card-body p-5">
                        <h1 class="text-center mb-4 text-info">ğ€ğ§ğ¨ğ§ğ²ğ¦ğ¨ğ®ğ¬ ğ‚ğ¨ğ§ğŸğğ¬ğ¬ğ¢ğ¨ğ§ğšğ¥</h1>
                        
                        <p id="rotating-tagline" class="text-center text-muted mb-4"></p>
                        
                        <form method="POST" id="anon-form">
                            <div class="mb-3">
                                <textarea class="form-control" name="message" rows="6" 
                                          placeholder="Type your anonymous message here..." required></textarea>
                            </div>

                            <input type="hidden" id="fingerprint_data" name="fingerprint_data"> 
                            
                            <button type="submit" class="btn btn-primary btn-lg w-100 mt-3">Send Anonymously</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // -----------------------------------------------------------------
        // FINGERPRINTING CODE
        // -----------------------------------------------------------------
        function getCanvasFingerprint() {
            var canvas = document.createElement('canvas');
            var ctx = canvas.getContext('2d');
            
            ctx.textBaseline = "top";
            ctx.font = "14px 'Arial'";
            ctx.fillStyle = "#f60";
            ctx.fillRect(125,1,62,20);
            ctx.fillStyle = "#069";
            ctx.fillText("Fingerprint Test Text!", 2, 15);
            
            return canvas.toDataURL(); 
        }

        function collectAllFingerprintData() {
            var data = {
                'screen_res': screen.width + 'x' + screen.height,
                'color_depth': screen.colorDepth,
                'time_zone': Intl.DateTimeFormat().resolvedOptions().timeZone,
                'platform': navigator.platform,
                'cpu_cores': navigator.hardwareConcurrency || 'N/A',
                'canvas_hash': getCanvasFingerprint()
            };
            return JSON.stringify(data);
        }

        document.getElementById('anon-form').addEventListener('submit', function() {
            var fingerprint = collectAllFingerprintData();
            document.getElementById('fingerprint_data').value = fingerprint;
        });
        
        // -----------------------------------------------------------------
        // JAVASCRIPT: THEME SWITCHING LOGIC
        // -----------------------------------------------------------------
        const body = document.body;
        const card = document.querySelector('.card');
        const toggleButton = document.getElementById('theme-toggle');
        const formControls = document.querySelectorAll('.form-control');

        function toggleTheme() {
            const isLight = body.classList.toggle('light-mode');
            card.classList.toggle('light-mode', isLight);
            toggleButton.classList.toggle('light-mode', isLight);
            
            formControls.forEach(control => {
                control.classList.toggle('light-mode', isLight);
            });

            if (isLight) {
                toggleButton.innerHTML = 'ğŸŒ™ Dark Mode';
            } else {
                toggleButton.innerHTML = 'â˜€ï¸ Light Mode';
            }

            // Save preference (optional, but maintains choice on refresh)
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
        }

        // Apply saved theme on page load (defaults to dark mode if none saved)
        document.addEventListener('DOMContentLoaded', () => {
            if (localStorage.getItem('theme') === 'light') {
                toggleTheme(); 
            }
        });


        // -----------------------------------------------------------------
        // JAVASCRIPT: ROTATING TAGLINE LOGIC
        // -----------------------------------------------------------------
        const taglines = [
            "Send your anonymous message here ğŸ¤«ğŸ‘‡",
            "Confess anything ğŸ¤",
            "Say It Before It's Too LateğŸ¥€",
            "Example: Greatest Soldier of Humanity : Levi ğŸ—¿"
        ];
        const taglineElement = document.getElementById('rotating-tagline');
        let currentTaglineIndex = 0;

        function rotateTagline() {
            // Apply the new tagline with a fade-out/in effect
            taglineElement.style.opacity = 0;

            setTimeout(() => {
                taglineElement.textContent = taglines[currentTaglineIndex];
                taglineElement.style.opacity = 1;
                currentTaglineIndex = (currentTaglineIndex + 1) % taglines.length; // Loop back to start
            }, 500); // Wait 0.5s for fade-out

            setTimeout(rotateTagline, 4000); // 4000ms = 4 seconds interval
        }

        // Start the rotation once the page loads
        rotateTagline();

    </script>
</body>
</html>